#!/usr/bin/env bash

IFACE="yoga-SE-327"

cleanup() {
  echo
  echo "ğŸ”Œ Disconnecting WireGuard ($IFACE)..."
  sudo wg-quick down "$IFACE"
}

echo "ğŸ” Connecting WireGuard ($IFACE)..."
sudo wg-quick up "$IFACE" || exit 1

# Run cleanup on terminal close, Ctrl+C, or shell exit
trap cleanup EXIT INT TERM

echo "âœ… WireGuard is up."
echo "Close this terminal or press Ctrl+C to disconnect."
echo

# Keep the script running while terminal is open
while true; do
  sleep 60
done
